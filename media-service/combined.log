{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-19T15:24:46.698Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-19T15:24:47.217Z"}
{"level":"info","message":"Received POST request to /api/media/upload","service":"media-service","timestamp":"2025-03-19T15:37:32.820Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-19T15:37:32.824Z"}
{"level":"error","message":"Unknown error Multipart: Boundary not found","service":"media-service","stack":"Error: Multipart: Boundary not found\n    at new Multipart (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:233:13)\n    at getInstance (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/index.js:33:12)\n    at module.exports (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/index.js:56:10)\n    at multerMiddleware (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/lib/make-middleware.js:28:16)\n    at file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/routes/mediaRoutes.js:20:5\n    at Layer.handle [as handle_request] (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/route.js:149:13)\n    at authenticateRequest (file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/middlewares/authMeddleware.js:12:3)\n    at Layer.handle [as handle_request] (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/route.js:149:13)","timestamp":"2025-03-19T15:37:32.829Z"}
{"level":"info","message":"Received POST request to /api/media/upload","service":"media-service","timestamp":"2025-03-19T15:39:00.474Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-19T15:39:00.481Z"}
{"level":"error","message":"Unknown error Multipart: Boundary not found","service":"media-service","stack":"Error: Multipart: Boundary not found\n    at new Multipart (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:233:13)\n    at getInstance (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/index.js:33:12)\n    at module.exports (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/index.js:56:10)\n    at multerMiddleware (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/lib/make-middleware.js:28:16)\n    at file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/routes/mediaRoutes.js:20:5\n    at Layer.handle [as handle_request] (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/route.js:149:13)\n    at authenticateRequest (file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/middlewares/authMeddleware.js:12:3)\n    at Layer.handle [as handle_request] (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/route.js:149:13)","timestamp":"2025-03-19T15:39:00.486Z"}
{"level":"info","message":"Received POST request to /api/media/upload","service":"media-service","timestamp":"2025-03-19T15:42:25.739Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-19T15:42:25.746Z"}
{"code":"LIMIT_UNEXPECTED_FILE","field":"photo","level":"error","message":"Unexpected field","name":"MulterError","service":"media-service","stack":"MulterError: Unexpected field\n    at wrappedFileFilter (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/index.js:40:19)\n    at Multipart.<anonymous> (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/lib/make-middleware.js:107:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/streamsearch/lib/sbmh.js:248:10)\n    at SBMH.push (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:567:19)\n    at writeOrBuffer (node:internal/streams/writable:572:12)","storageErrors":[],"timestamp":"2025-03-19T15:42:25.782Z"}
{"level":"info","message":"Received POST request to /api/media/upload","service":"media-service","timestamp":"2025-03-19T15:46:15.411Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-19T15:46:15.414Z"}
{"code":"LIMIT_UNEXPECTED_FILE","field":"originalName","level":"error","message":"Unexpected field","name":"MulterError","service":"media-service","stack":"MulterError: Unexpected field\n    at wrappedFileFilter (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/index.js:40:19)\n    at Multipart.<anonymous> (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/lib/make-middleware.js:107:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/streamsearch/lib/sbmh.js:248:10)\n    at SBMH.push (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:567:19)\n    at writeOrBuffer (node:internal/streams/writable:572:12)","storageErrors":[],"timestamp":"2025-03-19T15:46:15.427Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-19T15:49:21.702Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-19T15:49:22.290Z"}
{"level":"info","message":"Received POST request to /api/media/upload","service":"media-service","timestamp":"2025-03-19T15:49:47.305Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-19T15:49:47.306Z"}
{"code":"LIMIT_UNEXPECTED_FILE","field":"originalName","level":"error","message":"Unexpected field","name":"MulterError","service":"media-service","stack":"MulterError: Unexpected field\n    at wrappedFileFilter (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/index.js:40:19)\n    at Multipart.<anonymous> (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/lib/make-middleware.js:107:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/streamsearch/lib/sbmh.js:200:10)\n    at SBMH.push (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:567:19)\n    at writeOrBuffer (node:internal/streams/writable:572:12)","storageErrors":[],"timestamp":"2025-03-19T15:49:47.309Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-19T15:50:40.331Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-19T15:50:40.825Z"}
{"level":"info","message":"Received POST request to /api/media/upload","service":"media-service","timestamp":"2025-03-20T01:39:22.195Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-20T01:39:22.200Z"}
{"level":"info","message":"Media upload started","service":"media-service","timestamp":"2025-03-20T01:39:22.240Z"}
{"level":"info","message":"Feliname details: undefined, undefined, 67d9bef46c9708f48dc1341f","service":"media-service","timestamp":"2025-03-20T01:39:22.248Z"}
{"level":"info","message":"Uploading to cloudinary started","service":"media-service","timestamp":"2025-03-20T01:39:22.248Z"}
{"level":"error","message":"Error uploading media Must supply api_key","service":"media-service","stack":"Error: Must supply api_key\n    at ensureOption (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/ensureOption.js:19:13)\n    at Object.sign_request (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1164:16)\n    at Object.process_request_params (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1214:22)\n    at call_api (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:474:18)\n    at Object.upload (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:53:10)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:40:18)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1411:21)\n    at file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:13:49\n    at new Promise (<anonymous>)\n    at uploadMediaToCloudinary (file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:12:10)","timestamp":"2025-03-20T01:39:22.270Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T01:43:14.848Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T01:43:15.396Z"}
{"level":"info","message":"Received POST request to /api/media/upload","service":"media-service","timestamp":"2025-03-20T01:43:28.716Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-20T01:43:28.717Z"}
{"level":"info","message":"Media upload started","service":"media-service","timestamp":"2025-03-20T01:43:28.724Z"}
{"level":"info","message":"Feliname details: undefined, undefined, 67d9bef46c9708f48dc1341f","service":"media-service","timestamp":"2025-03-20T01:43:28.726Z"}
{"level":"info","message":"Uploading to cloudinary started","service":"media-service","timestamp":"2025-03-20T01:43:28.726Z"}
{"level":"error","message":"Error uploading media Must supply api_key","service":"media-service","stack":"Error: Must supply api_key\n    at ensureOption (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/ensureOption.js:19:13)\n    at Object.sign_request (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1164:16)\n    at Object.process_request_params (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1214:22)\n    at call_api (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:474:18)\n    at Object.upload (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:53:10)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:40:18)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1411:21)\n    at file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:14:49\n    at new Promise (<anonymous>)\n    at uploadMediaToCloudinary (file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:13:10)","timestamp":"2025-03-20T01:43:28.729Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T01:44:30.588Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T01:44:31.032Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T01:48:11.071Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T01:48:11.618Z"}
{"level":"info","message":"Received POST request to /api/media/upload","service":"media-service","timestamp":"2025-03-20T01:48:17.386Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-20T01:48:17.387Z"}
{"level":"info","message":"Media upload started","service":"media-service","timestamp":"2025-03-20T01:48:17.391Z"}
{"level":"info","message":"Feliname details: undefined, undefined, 67d9bef46c9708f48dc1341f","service":"media-service","timestamp":"2025-03-20T01:48:17.391Z"}
{"level":"info","message":"Uploading to cloudinary started","service":"media-service","timestamp":"2025-03-20T01:48:17.392Z"}
{"level":"error","message":"Error uploading media Must supply api_key","service":"media-service","stack":"Error: Must supply api_key\n    at ensureOption (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/ensureOption.js:19:13)\n    at Object.sign_request (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1164:16)\n    at Object.process_request_params (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1214:22)\n    at call_api (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:474:18)\n    at Object.upload (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:53:10)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:40:18)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1411:21)\n    at file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:14:49\n    at new Promise (<anonymous>)\n    at uploadMediaToCloudinary (file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:13:10)","timestamp":"2025-03-20T01:48:17.396Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T01:50:11.296Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T01:50:12.174Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T01:51:17.730Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T01:51:18.254Z"}
{"level":"info","message":"Received POST request to /api/media/upload","service":"media-service","timestamp":"2025-03-20T01:51:23.015Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-20T01:51:23.016Z"}
{"level":"info","message":"Media upload started","service":"media-service","timestamp":"2025-03-20T01:51:23.022Z"}
{"level":"info","message":"Feliname details: undefined, undefined, 67d9bef46c9708f48dc1341f","service":"media-service","timestamp":"2025-03-20T01:51:23.025Z"}
{"level":"info","message":"Uploading to cloudinary started","service":"media-service","timestamp":"2025-03-20T01:51:23.025Z"}
{"level":"error","message":"Error uploading media Must supply api_key","service":"media-service","stack":"Error: Must supply api_key\n    at ensureOption (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/ensureOption.js:19:13)\n    at Object.sign_request (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1164:16)\n    at Object.process_request_params (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1214:22)\n    at call_api (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:474:18)\n    at Object.upload (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:53:10)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:40:18)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1411:21)\n    at file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:14:46\n    at new Promise (<anonymous>)\n    at uploadMediaToCloudinary (file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:13:10)","timestamp":"2025-03-20T01:51:23.027Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T01:52:20.629Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T01:52:21.112Z"}
{"level":"info","message":"Received POST request to /api/media/upload","service":"media-service","timestamp":"2025-03-20T01:52:34.812Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-20T01:52:34.813Z"}
{"level":"info","message":"Media upload started","service":"media-service","timestamp":"2025-03-20T01:52:34.822Z"}
{"level":"info","message":"Feliname details: undefined, undefined, 67d9bef46c9708f48dc1341f","service":"media-service","timestamp":"2025-03-20T01:52:34.822Z"}
{"level":"info","message":"Uploading to cloudinary started","service":"media-service","timestamp":"2025-03-20T01:52:34.822Z"}
{"level":"error","message":"Error uploading media Must supply api_key","service":"media-service","stack":"Error: Must supply api_key\n    at ensureOption (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/ensureOption.js:19:13)\n    at Object.sign_request (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1164:16)\n    at Object.process_request_params (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1214:22)\n    at call_api (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:474:18)\n    at Object.upload (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:53:10)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:40:18)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1411:21)\n    at file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:14:46\n    at new Promise (<anonymous>)\n    at uploadMediaToCloudinary (file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:13:10)","timestamp":"2025-03-20T01:52:34.824Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T01:54:13.641Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T01:54:14.194Z"}
{"level":"info","message":"Received POST request to /api/media/upload","service":"media-service","timestamp":"2025-03-20T01:54:34.857Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-20T01:54:34.860Z"}
{"level":"info","message":"Media upload started","service":"media-service","timestamp":"2025-03-20T01:54:34.868Z"}
{"level":"info","message":"Feliname details: undefined, undefined, 67d9bef46c9708f48dc1341f","service":"media-service","timestamp":"2025-03-20T01:54:34.869Z"}
{"level":"info","message":"Uploading to cloudinary started","service":"media-service","timestamp":"2025-03-20T01:54:34.869Z"}
{"level":"info","message":"Uploading to cloudinary completed. Public ID: nae1tcxd2dwjhsob0bgl","service":"media-service","timestamp":"2025-03-20T01:54:36.874Z"}
{"_message":"Media validation failed","errors":{"mimeType":{"kind":"required","message":"Path `mimeType` is required.","name":"ValidatorError","path":"mimeType","properties":{"message":"Path `mimeType` is required.","path":"mimeType","type":"required"}},"originalName":{"kind":"required","message":"Path `originalName` is required.","name":"ValidatorError","path":"originalName","properties":{"message":"Path `originalName` is required.","path":"originalName","type":"required"}}},"level":"error","message":"Error uploading media Media validation failed: originalName: Path `originalName` is required., mimeType: Path `mimeType` is required.","service":"media-service","stack":"ValidationError: Media validation failed: originalName: Path `originalName` is required., mimeType: Path `mimeType` is required.\n    at Document.invalidate (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/document.js:3329:32)\n    at /Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/document.js:3090:17\n    at /Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-20T01:54:36.887Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T01:59:18.356Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T01:59:18.863Z"}
{"level":"info","message":"Received POST request to /api/media/upload","service":"media-service","timestamp":"2025-03-20T01:59:24.202Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-20T01:59:24.203Z"}
{"level":"info","message":"Media upload started","service":"media-service","timestamp":"2025-03-20T01:59:24.208Z"}
{"level":"error","message":"Error uploading media originalName is not defined","service":"media-service","stack":"ReferenceError: originalName is not defined\n    at uploadMedia (file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/controllers/mediaController.js:19:38)\n    at Layer.handle [as handle_request] (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/route.js:149:13)\n    at file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/routes/mediaRoutes.js:44:7\n    at done (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/lib/make-middleware.js:45:7)\n    at indicateDone (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/lib/make-middleware.js:49:68)\n    at Multipart.<anonymous> (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/lib/make-middleware.js:166:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-03-20T01:59:24.211Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T02:02:45.299Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T02:02:45.841Z"}
{"level":"info","message":"Received POST request to /api/media/upload","service":"media-service","timestamp":"2025-03-20T02:02:46.304Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-20T02:02:46.305Z"}
{"level":"info","message":"Media upload started","service":"media-service","timestamp":"2025-03-20T02:02:46.309Z"}
{"level":"info","message":"Feliname details: Раскраски-Лева-7.jpg, image/jpeg, 67d9bef46c9708f48dc1341f","service":"media-service","timestamp":"2025-03-20T02:02:46.310Z"}
{"level":"info","message":"Uploading to cloudinary started","service":"media-service","timestamp":"2025-03-20T02:02:46.310Z"}
{"level":"info","message":"Uploading to cloudinary completed. Public ID: vfdmttpvpmpyey9xjtya","service":"media-service","timestamp":"2025-03-20T02:02:48.220Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T02:04:00.756Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T02:04:01.329Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T02:35:35.668Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T02:35:36.187Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T02:37:04.235Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T02:37:04.826Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T02:48:07.765Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T02:48:08.271Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T02:49:33.412Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T02:49:34.102Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T02:50:20.455Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T02:50:20.958Z"}
{"level":"info","message":"Received POST request to /api/media/upload","service":"media-service","timestamp":"2025-03-20T02:54:42.960Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-20T02:54:42.967Z"}
{"level":"info","message":"Media upload started","service":"media-service","timestamp":"2025-03-20T02:54:42.989Z"}
{"level":"info","message":"Feliname details: Раскраски-Лева-7.jpg, image/jpeg, 67d9bef46c9708f48dc1341f","service":"media-service","timestamp":"2025-03-20T02:54:42.991Z"}
{"level":"info","message":"Uploading to cloudinary started","service":"media-service","timestamp":"2025-03-20T02:54:42.991Z"}
{"level":"info","message":"Uploading to cloudinary completed. Public ID: aqyx8xwieepswmwat4dw","service":"media-service","timestamp":"2025-03-20T02:54:44.873Z"}
{"level":"info","message":"Received GET request to /api/media/all","service":"media-service","timestamp":"2025-03-20T02:55:28.800Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-20T02:55:28.806Z"}
{"level":"info","message":"Getting all media","service":"media-service","timestamp":"2025-03-20T02:55:28.812Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T03:07:39.710Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T03:07:40.200Z"}
{"level":"info","message":"Connected to RabbitMQ","service":"media-service","timestamp":"2025-03-20T03:20:51.466Z"}
{"0":"p","1":"o","10":"e","11":"d","2":"s","3":"t","4":"-","5":"d","6":"e","7":"l","8":"e","9":"t","level":"info","message":"Consuming events from RabbitMQ","service":"media-service","timestamp":"2025-03-20T03:20:51.508Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T03:20:51.510Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T03:20:51.949Z"}
{"level":"info","message":"Received POST request to /api/media/upload","service":"media-service","timestamp":"2025-03-20T03:24:00.305Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-20T03:24:00.306Z"}
{"level":"info","message":"Media upload started","service":"media-service","timestamp":"2025-03-20T03:24:00.315Z"}
{"level":"info","message":"Feliname details: Раскраски-Лева-7.jpg, image/jpeg, 67d9bef46c9708f48dc1341f","service":"media-service","timestamp":"2025-03-20T03:24:00.315Z"}
{"level":"info","message":"Uploading to cloudinary started","service":"media-service","timestamp":"2025-03-20T03:24:00.315Z"}
{"level":"info","message":"Uploading to cloudinary completed. Public ID: on0qasnovyfsmbhccfk7","service":"media-service","timestamp":"2025-03-20T03:24:02.073Z"}
{"level":"error","message":"unhandledRejection","service":"media-service","timestamp":"2025-03-20T03:33:47.115Z"}
{"level":"error","message":"unhandledRejection","service":"media-service","timestamp":"2025-03-20T03:39:40.460Z"}
{"level":"info","message":"Connected to RabbitMQ","service":"media-service","timestamp":"2025-03-20T03:45:23.925Z"}
{"0":"p","1":"o","10":"e","11":"d","2":"s","3":"t","4":".","5":"d","6":"e","7":"l","8":"e","9":"t","level":"info","message":"Consuming events from RabbitMQ","service":"media-service","timestamp":"2025-03-20T03:45:23.941Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T03:45:23.942Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T03:45:24.431Z"}
{"level":"info","message":"Connected to RabbitMQ","service":"media-service","timestamp":"2025-03-20T03:50:23.052Z"}
{"level":"info","message":"Consuming events from RabbitMQ","queue":"post.deleted","service":"media-service","timestamp":"2025-03-20T03:50:23.065Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T03:50:23.067Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T03:50:23.488Z"}
{"level":"info","message":"Connected to RabbitMQ","service":"media-service","timestamp":"2025-03-20T03:51:42.993Z"}
{"level":"info","message":"Consuming events from RabbitMQ","queue":"post.deleted","service":"media-service","timestamp":"2025-03-20T03:51:43.014Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T03:51:43.015Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T03:51:43.488Z"}
{"level":"error","message":"unhandledRejection","service":"media-service","timestamp":"2025-03-20T03:54:11.878Z"}
{"level":"info","message":"Connected to RabbitMQ","service":"media-service","timestamp":"2025-03-20T03:55:51.650Z"}
{"level":"info","message":"Consuming events from RabbitMQ","queue":"post.deleted","service":"media-service","timestamp":"2025-03-20T03:55:51.665Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T03:55:51.666Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T03:55:52.111Z"}
{"level":"error","message":"unhandledRejection","service":"media-service","timestamp":"2025-03-20T03:56:03.657Z"}
{"level":"info","message":"Connected to RabbitMQ","service":"media-service","timestamp":"2025-03-20T03:56:53.717Z"}
{"level":"info","message":"Consuming events from RabbitMQ","queue":"post.deleted","service":"media-service","timestamp":"2025-03-20T03:56:53.780Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T03:56:53.783Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T03:56:54.208Z"}
{"level":"error","message":"unhandledRejection","service":"media-service","timestamp":"2025-03-20T03:57:43.092Z"}
{"level":"info","message":"Connected to RabbitMQ","service":"media-service","timestamp":"2025-03-20T03:59:24.689Z"}
{"level":"info","message":"Consuming events from RabbitMQ","queue":"post.deleted","service":"media-service","timestamp":"2025-03-20T03:59:24.705Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T03:59:24.707Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T03:59:25.158Z"}
{"level":"error","message":"unhandledRejection","service":"media-service","timestamp":"2025-03-20T03:59:39.738Z"}
{"level":"info","message":"Connected to RabbitMQ","service":"media-service","timestamp":"2025-03-20T04:00:40.545Z"}
{"level":"info","message":"Consuming events from RabbitMQ","queue":"post.deleted","service":"media-service","timestamp":"2025-03-20T04:00:40.555Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T04:00:40.558Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T04:00:40.945Z"}
{"level":"info","message":"Connected to RabbitMQ","service":"media-service","timestamp":"2025-03-20T04:01:07.282Z"}
{"level":"info","message":"Consuming events from RabbitMQ","queue":"post.deleted","service":"media-service","timestamp":"2025-03-20T04:01:07.298Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T04:01:07.301Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T04:01:07.704Z"}
{"level":"info","message":"Connected to RabbitMQ","service":"media-service","timestamp":"2025-03-20T04:14:56.922Z"}
{"level":"info","message":"Consuming events from RabbitMQ","queue":"post.deleted","service":"media-service","timestamp":"2025-03-20T04:14:56.945Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T04:14:56.947Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T04:14:57.379Z"}
{"level":"info","message":"Connected to RabbitMQ","service":"media-service","timestamp":"2025-03-20T04:15:11.403Z"}
{"level":"info","message":"Consuming events from RabbitMQ","queue":"post.deleted","service":"media-service","timestamp":"2025-03-20T04:15:11.424Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T04:15:11.429Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T04:15:11.852Z"}
{"level":"info","message":"Connected to RabbitMQ","service":"media-service","timestamp":"2025-03-20T04:16:45.974Z"}
{"level":"info","message":"Consuming events from RabbitMQ","queue":"post.deleted","service":"media-service","timestamp":"2025-03-20T04:16:45.991Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T04:16:45.994Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T04:16:46.619Z"}
{"level":"info","message":"Connected to RabbitMQ","service":"media-service","timestamp":"2025-03-20T04:17:01.511Z"}
{"level":"info","message":"Consuming events from RabbitMQ","queue":"post.deleted","service":"media-service","timestamp":"2025-03-20T04:17:01.517Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T04:17:01.519Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T04:17:02.143Z"}
{"level":"info","message":"Connected to RabbitMQ","service":"media-service","timestamp":"2025-03-20T04:19:59.346Z"}
{"level":"info","message":"Consuming events from RabbitMQ","queue":"post.deleted","service":"media-service","timestamp":"2025-03-20T04:19:59.359Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T04:19:59.364Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T04:19:59.870Z"}
{"level":"info","message":"Received POST request to /api/media/upload","service":"media-service","timestamp":"2025-03-20T04:21:40.120Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-20T04:21:40.121Z"}
{"level":"info","message":"Media upload started","service":"media-service","timestamp":"2025-03-20T04:21:40.129Z"}
{"level":"info","message":"Feliname details: Раскраски-Лева-7.jpg, image/jpeg, 67d9bef46c9708f48dc1341f","service":"media-service","timestamp":"2025-03-20T04:21:40.129Z"}
{"level":"info","message":"Uploading to cloudinary started","service":"media-service","timestamp":"2025-03-20T04:21:40.129Z"}
{"level":"info","message":"Uploading to cloudinary completed. Public ID: k9iiivn77pmngse7g5dq","service":"media-service","timestamp":"2025-03-20T04:21:41.891Z"}
{"kind":"ObjectId","level":"error","message":"Error deleting post Cast to ObjectId failed for value \"k9iiivn77pmngse7g5dq\" (type string) at path \"_id\" for model \"Media\"","path":"_id","reason":{},"service":"media-service","stack":"CastError: Cast to ObjectId failed for value \"k9iiivn77pmngse7g5dq\" (type string) at path \"_id\" for model \"Media\"\n    at SchemaObjectId.cast (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at /Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/schemaType.js:1634:18\n    at Array.map (<anonymous>)\n    at SchemaObjectId.handle$in (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/schemaType.js:1630:14)\n    at SchemaType.castForQuery (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/schemaType.js:1669:20)\n    at cast (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/cast.js:367:39)\n    at Query.cast (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/query.js:4907:12)\n    at Query._castConditions (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/query.js:2325:10)","stringValue":"\"k9iiivn77pmngse7g5dq\"","timestamp":"2025-03-20T04:22:52.794Z","value":"k9iiivn77pmngse7g5dq","valueType":"string"}
{"level":"info","message":"Received GET request to /api/media/all","service":"media-service","timestamp":"2025-03-20T04:23:24.793Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-20T04:23:24.796Z"}
{"level":"info","message":"Getting all media","service":"media-service","timestamp":"2025-03-20T04:23:24.799Z"}
{"level":"info","message":"Media deleted from cloudinary","service":"media-service","timestamp":"2025-03-20T04:24:22.613Z"}
{"level":"info","message":"Media deleted: 67db97d546735b72b679a8b5 assosiated with post: 67db98646374f8125e7f22fb","service":"media-service","timestamp":"2025-03-20T04:24:22.658Z"}
{"level":"info","message":"Processed deletion of post: 67db98646374f8125e7f22fb by user: 67d9bef46c9708f48dc1341f","service":"media-service","timestamp":"2025-03-20T04:24:22.658Z"}
{"level":"info","message":"Received GET request to /api/media/all","service":"media-service","timestamp":"2025-03-20T04:25:32.480Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-20T04:25:32.481Z"}
{"level":"info","message":"Getting all media","service":"media-service","timestamp":"2025-03-20T04:25:32.486Z"}
{"level":"info","message":"Connected to RabbitMQ","service":"media-service","timestamp":"2025-03-20T04:27:24.072Z"}
{"level":"info","message":"Consuming events from RabbitMQ","queue":"post.deleted","service":"media-service","timestamp":"2025-03-20T04:27:24.082Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-20T04:27:24.083Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-20T04:27:24.557Z"}
{"level":"info","message":"Connected to RabbitMQ","service":"media-service","timestamp":"2025-03-21T01:04:33.616Z"}
{"level":"info","message":"Consuming events from RabbitMQ","queue":"post.deleted","service":"media-service","timestamp":"2025-03-21T01:04:33.634Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-21T01:04:33.637Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-21T01:04:34.129Z"}
{"level":"info","message":"Processed deletion of post: 67dcbf209e4f5b4318f85217 by user: 67d9bef46c9708f48dc1341f","service":"media-service","timestamp":"2025-03-21T01:28:48.802Z"}
{"level":"info","message":"Processed deletion of post: 67dcbefd9e4f5b4318f85215 by user: 67d9bef46c9708f48dc1341f","service":"media-service","timestamp":"2025-03-21T01:30:50.396Z"}
{"level":"info","message":"Processed deletion of post: 67dcc2b99e4f5b4318f8522b by user: 67d9bef46c9708f48dc1341f","service":"media-service","timestamp":"2025-03-21T01:37:24.986Z"}
{"level":"info","message":"Processed deletion of post: 67dcc48e9e4f5b4318f85230 by user: 67d9bef46c9708f48dc1341f","service":"media-service","timestamp":"2025-03-21T01:45:07.741Z"}
{"level":"info","message":"Processed deletion of post: 67dcc2b89e4f5b4318f85229 by user: 67d9bef46c9708f48dc1341f","service":"media-service","timestamp":"2025-03-21T02:03:34.011Z"}
{"level":"info","message":"Processed deletion of post: 67dcc2b79e4f5b4318f85227 by user: 67d9bef46c9708f48dc1341f","service":"media-service","timestamp":"2025-03-21T02:11:08.236Z"}
{"level":"info","message":"Processed deletion of post: 67dcc2b29e4f5b4318f85221 by user: 67d9bef46c9708f48dc1341f","service":"media-service","timestamp":"2025-03-21T02:12:28.562Z"}
{"level":"info","message":"Received GET request to /api/media/all","service":"media-service","timestamp":"2025-03-21T15:49:47.508Z"}
{"level":"info","message":"Request body: {}","service":"media-service","timestamp":"2025-03-21T15:49:47.515Z"}
{"level":"info","message":"Getting all media","service":"media-service","timestamp":"2025-03-21T15:49:47.517Z"}
{"level":"info","message":"Connected to RabbitMQ","service":"media-service","timestamp":"2025-03-21T16:33:12.978Z"}
{"level":"info","message":"Consuming events from RabbitMQ","queue":"post.deleted","service":"media-service","timestamp":"2025-03-21T16:33:12.981Z"}
{"level":"info","message":"Media service started on port 3007","service":"media-service","timestamp":"2025-03-21T16:33:12.982Z"}
{"level":"info","message":"Connected to database","service":"media-service","timestamp":"2025-03-21T16:33:13.387Z"}
