{"level":"error","message":"Unknown error Multipart: Boundary not found","service":"media-service","stack":"Error: Multipart: Boundary not found\n    at new Multipart (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:233:13)\n    at getInstance (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/index.js:33:12)\n    at module.exports (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/index.js:56:10)\n    at multerMiddleware (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/lib/make-middleware.js:28:16)\n    at file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/routes/mediaRoutes.js:20:5\n    at Layer.handle [as handle_request] (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/route.js:149:13)\n    at authenticateRequest (file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/middlewares/authMeddleware.js:12:3)\n    at Layer.handle [as handle_request] (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/route.js:149:13)","timestamp":"2025-03-19T15:37:32.829Z"}
{"level":"error","message":"Unknown error Multipart: Boundary not found","service":"media-service","stack":"Error: Multipart: Boundary not found\n    at new Multipart (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:233:13)\n    at getInstance (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/index.js:33:12)\n    at module.exports (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/index.js:56:10)\n    at multerMiddleware (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/lib/make-middleware.js:28:16)\n    at file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/routes/mediaRoutes.js:20:5\n    at Layer.handle [as handle_request] (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/route.js:149:13)\n    at authenticateRequest (file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/middlewares/authMeddleware.js:12:3)\n    at Layer.handle [as handle_request] (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/route.js:149:13)","timestamp":"2025-03-19T15:39:00.486Z"}
{"code":"LIMIT_UNEXPECTED_FILE","field":"photo","level":"error","message":"Unexpected field","name":"MulterError","service":"media-service","stack":"MulterError: Unexpected field\n    at wrappedFileFilter (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/index.js:40:19)\n    at Multipart.<anonymous> (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/lib/make-middleware.js:107:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/streamsearch/lib/sbmh.js:248:10)\n    at SBMH.push (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:567:19)\n    at writeOrBuffer (node:internal/streams/writable:572:12)","storageErrors":[],"timestamp":"2025-03-19T15:42:25.782Z"}
{"code":"LIMIT_UNEXPECTED_FILE","field":"originalName","level":"error","message":"Unexpected field","name":"MulterError","service":"media-service","stack":"MulterError: Unexpected field\n    at wrappedFileFilter (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/index.js:40:19)\n    at Multipart.<anonymous> (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/lib/make-middleware.js:107:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/streamsearch/lib/sbmh.js:248:10)\n    at SBMH.push (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:567:19)\n    at writeOrBuffer (node:internal/streams/writable:572:12)","storageErrors":[],"timestamp":"2025-03-19T15:46:15.427Z"}
{"code":"LIMIT_UNEXPECTED_FILE","field":"originalName","level":"error","message":"Unexpected field","name":"MulterError","service":"media-service","stack":"MulterError: Unexpected field\n    at wrappedFileFilter (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/index.js:40:19)\n    at Multipart.<anonymous> (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/lib/make-middleware.js:107:7)\n    at Multipart.emit (node:events:518:28)\n    at HeaderParser.cb (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:358:14)\n    at HeaderParser.push (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:394:37)\n    at feed (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/streamsearch/lib/sbmh.js:200:10)\n    at SBMH.push (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/streamsearch/lib/sbmh.js:104:16)\n    at Multipart._write (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/busboy/lib/types/multipart.js:567:19)\n    at writeOrBuffer (node:internal/streams/writable:572:12)","storageErrors":[],"timestamp":"2025-03-19T15:49:47.309Z"}
{"level":"error","message":"Error uploading media Must supply api_key","service":"media-service","stack":"Error: Must supply api_key\n    at ensureOption (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/ensureOption.js:19:13)\n    at Object.sign_request (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1164:16)\n    at Object.process_request_params (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1214:22)\n    at call_api (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:474:18)\n    at Object.upload (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:53:10)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:40:18)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1411:21)\n    at file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:13:49\n    at new Promise (<anonymous>)\n    at uploadMediaToCloudinary (file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:12:10)","timestamp":"2025-03-20T01:39:22.270Z"}
{"level":"error","message":"Error uploading media Must supply api_key","service":"media-service","stack":"Error: Must supply api_key\n    at ensureOption (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/ensureOption.js:19:13)\n    at Object.sign_request (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1164:16)\n    at Object.process_request_params (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1214:22)\n    at call_api (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:474:18)\n    at Object.upload (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:53:10)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:40:18)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1411:21)\n    at file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:14:49\n    at new Promise (<anonymous>)\n    at uploadMediaToCloudinary (file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:13:10)","timestamp":"2025-03-20T01:43:28.729Z"}
{"level":"error","message":"Error uploading media Must supply api_key","service":"media-service","stack":"Error: Must supply api_key\n    at ensureOption (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/ensureOption.js:19:13)\n    at Object.sign_request (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1164:16)\n    at Object.process_request_params (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1214:22)\n    at call_api (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:474:18)\n    at Object.upload (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:53:10)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:40:18)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1411:21)\n    at file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:14:49\n    at new Promise (<anonymous>)\n    at uploadMediaToCloudinary (file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:13:10)","timestamp":"2025-03-20T01:48:17.396Z"}
{"level":"error","message":"Error uploading media Must supply api_key","service":"media-service","stack":"Error: Must supply api_key\n    at ensureOption (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/ensureOption.js:19:13)\n    at Object.sign_request (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1164:16)\n    at Object.process_request_params (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1214:22)\n    at call_api (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:474:18)\n    at Object.upload (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:53:10)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:40:18)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1411:21)\n    at file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:14:46\n    at new Promise (<anonymous>)\n    at uploadMediaToCloudinary (file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:13:10)","timestamp":"2025-03-20T01:51:23.027Z"}
{"level":"error","message":"Error uploading media Must supply api_key","service":"media-service","stack":"Error: Must supply api_key\n    at ensureOption (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/ensureOption.js:19:13)\n    at Object.sign_request (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1164:16)\n    at Object.process_request_params (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1214:22)\n    at call_api (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:474:18)\n    at Object.upload (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:53:10)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/uploader.js:40:18)\n    at Object.upload_stream (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/cloudinary/lib/utils/index.js:1411:21)\n    at file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:14:46\n    at new Promise (<anonymous>)\n    at uploadMediaToCloudinary (file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/utils/cloudinary.js:13:10)","timestamp":"2025-03-20T01:52:34.824Z"}
{"_message":"Media validation failed","errors":{"mimeType":{"kind":"required","message":"Path `mimeType` is required.","name":"ValidatorError","path":"mimeType","properties":{"message":"Path `mimeType` is required.","path":"mimeType","type":"required"}},"originalName":{"kind":"required","message":"Path `originalName` is required.","name":"ValidatorError","path":"originalName","properties":{"message":"Path `originalName` is required.","path":"originalName","type":"required"}}},"level":"error","message":"Error uploading media Media validation failed: originalName: Path `originalName` is required., mimeType: Path `mimeType` is required.","service":"media-service","stack":"ValidationError: Media validation failed: originalName: Path `originalName` is required., mimeType: Path `mimeType` is required.\n    at Document.invalidate (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/document.js:3329:32)\n    at /Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/document.js:3090:17\n    at /Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-03-20T01:54:36.887Z"}
{"level":"error","message":"Error uploading media originalName is not defined","service":"media-service","stack":"ReferenceError: originalName is not defined\n    at uploadMedia (file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/controllers/mediaController.js:19:38)\n    at Layer.handle [as handle_request] (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/express/lib/router/route.js:149:13)\n    at file:///Users/ogoncharenko/Projects/social-media-microservices/media-service/src/routes/mediaRoutes.js:44:7\n    at done (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/lib/make-middleware.js:45:7)\n    at indicateDone (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/lib/make-middleware.js:49:68)\n    at Multipart.<anonymous> (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/multer/lib/make-middleware.js:166:7)\n    at Multipart.emit (node:events:518:28)\n    at emitCloseNT (node:internal/streams/destroy:148:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:89:21)","timestamp":"2025-03-20T01:59:24.211Z"}
{"level":"error","message":"unhandledRejection","service":"media-service","timestamp":"2025-03-20T03:33:47.115Z"}
{"level":"error","message":"unhandledRejection","service":"media-service","timestamp":"2025-03-20T03:39:40.460Z"}
{"level":"error","message":"unhandledRejection","service":"media-service","timestamp":"2025-03-20T03:54:11.878Z"}
{"level":"error","message":"unhandledRejection","service":"media-service","timestamp":"2025-03-20T03:56:03.657Z"}
{"level":"error","message":"unhandledRejection","service":"media-service","timestamp":"2025-03-20T03:57:43.092Z"}
{"level":"error","message":"unhandledRejection","service":"media-service","timestamp":"2025-03-20T03:59:39.738Z"}
{"kind":"ObjectId","level":"error","message":"Error deleting post Cast to ObjectId failed for value \"k9iiivn77pmngse7g5dq\" (type string) at path \"_id\" for model \"Media\"","path":"_id","reason":{},"service":"media-service","stack":"CastError: Cast to ObjectId failed for value \"k9iiivn77pmngse7g5dq\" (type string) at path \"_id\" for model \"Media\"\n    at SchemaObjectId.cast (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/schema/objectId.js:251:11)\n    at SchemaType.applySetters (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/schemaType.js:1255:12)\n    at SchemaType.castForQuery (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/schemaType.js:1673:17)\n    at /Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/schemaType.js:1634:18\n    at Array.map (<anonymous>)\n    at SchemaObjectId.handle$in (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/schemaType.js:1630:14)\n    at SchemaType.castForQuery (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/schemaType.js:1669:20)\n    at cast (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/cast.js:367:39)\n    at Query.cast (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/query.js:4907:12)\n    at Query._castConditions (/Users/ogoncharenko/Projects/social-media-microservices/media-service/node_modules/mongoose/lib/query.js:2325:10)","stringValue":"\"k9iiivn77pmngse7g5dq\"","timestamp":"2025-03-20T04:22:52.794Z","value":"k9iiivn77pmngse7g5dq","valueType":"string"}
